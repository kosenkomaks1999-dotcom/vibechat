# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∞–≤–∞—Ç–∞—Ä–æ–∫

## üêõ –ü—Ä–æ–±–ª–µ–º—ã

1. **–ê–≤–∞—Ç–∞—Ä–∫–∞ –≤ –ø—Ä–æ—Ñ–∏–ª–µ –æ–±—Ä–µ–∑–∞–µ—Ç—Å—è**: –£ –∫–∞—Ä—Ç–∏–Ω–∫–∏ –æ–±—Ä–µ–∑–∞—é—Ç—Å—è –∫—Ä–∞—è —Å–≤–µ—Ä—Ö—É –∏ —Å–Ω–∏–∑—É
2. **–ê–≤–∞—Ç–∞—Ä–∫–∏ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —É —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤**: –í —Å–ø–∏—Å–∫–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∏–Ω–∏—Ü–∏–∞–ª—ã

## üîç –ü—Ä–∏—á–∏–Ω—ã

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –û–±—Ä–µ–∑–∫–∞ –∞–≤–∞—Ç–∞—Ä–∫–∏
CSS —Å–≤–æ–π—Å—Ç–≤–æ `object-fit: cover` –æ–±—Ä–µ–∑–∞–ª–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, —á—Ç–æ–±—ã –∑–∞–ø–æ–ª–Ω–∏—Ç—å –≤–µ—Å—å –∫—Ä—É–≥:
```css
.user-profile-avatar img {
  object-fit: cover; /* –û–±—Ä–µ–∑–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ */
}
```

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –ê–≤–∞—Ç–∞—Ä–∫–∏ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
–ö–æ–¥ —Å–æ–∑–¥–∞–≤–∞–ª —Ç–æ–ª—å–∫–æ –∏–Ω–∏—Ü–∏–∞–ª—ã, –Ω–æ –Ω–µ –∑–∞–≥—Ä—É–∂–∞–ª –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∞–≤–∞—Ç–∞—Ä–æ–∫:
```javascript
const avatar = document.createElement("div");
avatar.textContent = this.getInitials(data.nick); // –¢–æ–ª—å–∫–æ –∏–Ω–∏—Ü–∏–∞–ª—ã
// –ù–µ –±—ã–ª–æ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è!
```

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω CSS –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è

**–í—Å–µ –∞–≤–∞—Ç–∞—Ä–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `object-fit: cover`:**
```css
/* –ê–≤–∞—Ç–∞—Ä–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è */
.user-profile-avatar img {
  object-fit: cover; /* –ó–∞–ø–æ–ª–Ω—è–µ—Ç –≤–µ—Å—å –∫—Ä—É–≥ */
  object-position: center; /* –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ */
}

/* –ê–≤–∞—Ç–∞—Ä–∫–∏ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ */
.user-avatar {
  overflow: hidden; /* –û–±—Ä–µ–∑–∞–µ–º –ø–æ –∫—Ä—É–≥—É */
}

.user-avatar img {
  object-fit: cover; /* –ó–∞–ø–æ–ª–Ω—è–µ—Ç –≤–µ—Å—å –∫—Ä—É–≥ */
  object-position: center;
}

/* –ê–≤–∞—Ç–∞—Ä–∫–∏ –¥—Ä—É–∑–µ–π */
.friend-avatar {
  overflow: hidden;
}

.friend-avatar img {
  object-fit: cover;
  object-position: center;
}
```

### 2. –ò–∑–º–µ–Ω–µ–Ω —Å–ø–æ—Å–æ–± –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∞–≤–∞—Ç–∞—Ä–æ–∫

**–í—Å–µ –∞–≤–∞—Ç–∞—Ä–∫–∏ —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É—é—Ç `<img>` –≤–º–µ—Å—Ç–æ `background-image`:**

**–£—á–∞—Å—Ç–Ω–∏–∫–∏ (`users.js`):**
```javascript
async loadUserAvatar(userId, avatarElement) {
  const avatarUrl = await getUserAvatar(db, userId);
  if (avatarUrl) {
    const img = document.createElement('img');
    img.src = avatarUrl;
    avatarElement.textContent = '';
    avatarElement.appendChild(img);
  }
}
```

**–î—Ä—É–∑—å—è (`friends.js`):**
```javascript
if (avatar) {
  const img = document.createElement('img');
  img.src = avatar;
  img.alt = nickname;
  avatarEl.appendChild(img);
}
```

**–ü—Ä–æ—Ñ–∏–ª—å (`ui.js`):**
```javascript
if (avatarUrl) {
  const img = document.createElement('img');
  img.src = avatarUrl;
  img.alt = nickname || 'Avatar';
  avatarEl.appendChild(img);
}
```

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚ùå –£ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —Ç–æ–ª—å–∫–æ –∏–Ω–∏—Ü–∏–∞–ª—ã, –Ω–µ—Ç –∞–≤–∞—Ç–∞—Ä–æ–∫
- ‚ùå –ê–≤–∞—Ç–∞—Ä–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ `background-image`
- ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚úÖ –í—Å–µ –∞–≤–∞—Ç–∞—Ä–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `<img>` —ç–ª–µ–º–µ–Ω—Ç—ã
- ‚úÖ `object-fit: cover` –ø—Ä–∞–≤–∏–ª—å–Ω–æ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- ‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∑–∞–ø–æ–ª–Ω—è—é—Ç –≤–µ—Å—å –∫—Ä—É–≥, —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
- ‚úÖ –£ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∞–≤–∞—Ç–∞—Ä–∫–∏ –∏–∑ Firebase
- ‚úÖ –£ –¥—Ä—É–∑–µ–π –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∞–≤–∞—Ç–∞—Ä–∫–∏
- ‚úÖ –ê–≤–∞—Ç–∞—Ä–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è
- ‚úÖ –ï—Å–ª–∏ –∞–≤–∞—Ç–∞—Ä–∫–∞ –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª–∞—Å—å - –æ—Å—Ç–∞—é—Ç—Å—è –∏–Ω–∏—Ü–∏–∞–ª—ã

## üé® –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### CSS –∏–∑–º–µ–Ω–µ–Ω–∏—è

**`object-fit: contain` vs `cover`:**
- `cover` - –∑–∞–ø–æ–ª–Ω—è–µ—Ç –≤–µ—Å—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –æ–±—Ä–µ–∑–∞—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
- `contain` - –≤–ø–∏—Å—ã–≤–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é, —Å–æ—Ö—Ä–∞–Ω—è—è –ø—Ä–æ–ø–æ—Ä—Ü–∏–∏

**–§–æ–Ω –¥–ª—è –ø—Ä–æ–∑—Ä–∞—á–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:**
```css
background: rgba(0, 0, 0, 0.1);
```
–õ–µ–≥–∫–∏–π —Ç–µ–º–Ω—ã–π —Ñ–æ–Ω, —á—Ç–æ–±—ã –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–µ –æ–±–ª–∞—Å—Ç–∏ –±—ã–ª–∏ –≤–∏–¥–Ω—ã.

### JavaScript –∏–∑–º–µ–Ω–µ–Ω–∏—è

**–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞:**
- –ê–≤–∞—Ç–∞—Ä–∫–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –∏–∑ Firebase
- –ù–µ –±–ª–æ–∫–∏—Ä—É—é—Ç –æ—Ç—Ä–∏—Å–æ–≤–∫—É —Å–ø–∏—Å–∫–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- –ü—Ä–∏ –æ—à–∏–±–∫–µ –æ—Å—Ç–∞—é—Ç—Å—è –∏–Ω–∏—Ü–∏–∞–ª—ã

**–ü—Ä–æ–≤–µ—Ä–∫–∞ userId:**
```javascript
if (data.userId) {
  this.loadUserAvatar(data.userId, avatar);
}
```
–ó–∞–≥—Ä—É–∂–∞–µ–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—Å—Ç—å Firebase userId.

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç 1: –ê–≤–∞—Ç–∞—Ä–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è
1. –û—Ç–∫—Ä–æ–π—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è
2. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∞–≤–∞—Ç–∞—Ä–∫—É
3. ‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é, –±–µ–∑ –æ–±—Ä–µ–∑–∫–∏

### –¢–µ—Å—Ç 2: –ê–≤–∞—Ç–∞—Ä–∫–∏ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
1. –í–æ–π–¥–∏—Ç–µ –≤ –∫–æ–º–Ω–∞—Ç—É —Å –¥—Ä—É–≥–æ–º
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –¥—Ä—É–≥–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –∞–≤–∞—Ç–∞—Ä–∫–∞
3. ‚úÖ –í —Å–ø–∏—Å–∫–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –¥–æ–ª–∂–Ω–∞ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –µ–≥–æ –∞–≤–∞—Ç–∞—Ä–∫–∞
4. ‚úÖ –ï—Å–ª–∏ –∞–≤–∞—Ç–∞—Ä–∫–∏ –Ω–µ—Ç - –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∏–Ω–∏—Ü–∏–∞–ª—ã

### –¢–µ—Å—Ç 3: –†–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
1. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∫–≤–∞–¥—Ä–∞—Ç–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
4. ‚úÖ –í—Å–µ –¥–æ–ª–∂–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é, –±–µ–∑ –æ–±—Ä–µ–∑–∫–∏

## üìÅ –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. **`resources/app/style.css`**
   - –î–æ–±–∞–≤–ª–µ–Ω—ã —Å—Ç–∏–ª–∏ –¥–ª—è `img` –≤–Ω—É—Ç—Ä–∏ `.user-profile-avatar`
   - –î–æ–±–∞–≤–ª–µ–Ω—ã —Å—Ç–∏–ª–∏ –¥–ª—è `img` –≤–Ω—É—Ç—Ä–∏ `.user-avatar`
   - –î–æ–±–∞–≤–ª–µ–Ω—ã —Å—Ç–∏–ª–∏ –¥–ª—è `img` –≤–Ω—É—Ç—Ä–∏ `.friend-avatar`
   - –í—Å–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `object-fit: cover` –∏ `object-position: center`
   - –î–æ–±–∞–≤–ª–µ–Ω `overflow: hidden` –¥–ª—è –æ–±—Ä–µ–∑–∫–∏ –ø–æ –∫—Ä—É–≥—É

2. **`resources/app/src/modules/users.js`**
   - –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `loadUserAvatar()`
   - –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∞ –∞–≤–∞—Ç–∞—Ä–æ–∫ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–∞—Ä—Ç–æ—á–µ–∫
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `<img>` —ç–ª–µ–º–µ–Ω—Ç –≤–º–µ—Å—Ç–æ `background-image`

3. **`resources/app/src/modules/friends.js`**
   - –ò–∑–º–µ–Ω–µ–Ω —Å–ø–æ—Å–æ–± –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∞–≤–∞—Ç–∞—Ä–æ–∫
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `<img>` —ç–ª–µ–º–µ–Ω—Ç –≤–º–µ—Å—Ç–æ `background-image`

4. **`resources/app/src/modules/ui.js`**
   - –û–±–Ω–æ–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `setUserAvatar()`
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `<img>` —ç–ª–µ–º–µ–Ω—Ç –≤–º–µ—Å—Ç–æ `background-image`
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

## üí° –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≤–∞—Ç–∞—Ä–æ–∫
–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –∞–≤–∞—Ç–∞—Ä–æ–∫:
```javascript
this.avatarCache = new Map();

async loadUserAvatar(userId, avatarElement) {
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫—ç—à
  if (this.avatarCache.has(userId)) {
    const cachedUrl = this.avatarCache.get(userId);
    this.setAvatarImage(avatarElement, cachedUrl);
    return;
  }
  
  // –ó–∞–≥—Ä—É–∂–∞–µ–º –∏ –∫—ç—à–∏—Ä—É–µ–º
  const avatarUrl = await getUserAvatar(db, userId);
  if (avatarUrl) {
    this.avatarCache.set(userId, avatarUrl);
    this.setAvatarImage(avatarElement, avatarUrl);
  }
}
```

### Placeholder –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏:
```javascript
avatarElement.classList.add('loading');
// –ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏:
avatarElement.classList.remove('loading');
```

---

**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**: 12 –Ω–æ—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ

# –ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–µ–∫—Ç–∞ VibeChat

## üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ë–ê–ì–ò

### 1. **–£—Ç–µ—á–∫–∞ –ø–∞–º—è—Ç–∏ –≤ WebRTC (webrtc.js)**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –æ—à–∏–±–∫–µ WebRTC —Å–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤—ã–π peer, –Ω–æ —Å—Ç–∞—Ä—ã–π –Ω–µ –≤—Å–µ–≥–¥–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —É–Ω–∏—á—Ç–æ–∂–∞–µ—Ç—Å—è.
**–ú–µ—Å—Ç–æ:** `webrtc.js:106-117`
```javascript
peer.on("error", err => {
  // ...
  setTimeout(() => {
    if (this.roomRef && this.myId && !this.peers[otherIdCopy]) {
      this.createPeer(otherIdCopy, true); // –ú–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å –¥—É–±–ª–∏–∫–∞—Ç
    }
  }, CONSTANTS.RECONNECT_DELAY);
  peer.destroy(); // –£–Ω–∏—á—Ç–æ–∂–∞–µ—Ç—Å—è, –Ω–æ –º–æ–∂–µ—Ç –±—ã—Ç—å race condition
});
```
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –Ω–æ–≤–æ–≥–æ peer –∏ –æ—á–∏—Å—Ç–∫—É –≤—Å–µ—Ö —Ä–µ—Å—É—Ä—Å–æ–≤.

### 2. **Race condition –ø—Ä–∏ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ (app.js)**
**–ü—Ä–æ–±–ª–µ–º–∞:** `connectionManager.attemptReconnect` –º–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.
**–ú–µ—Å—Ç–æ:** `app.js:562-577`
```javascript
if (status === 'disconnected' && joined) {
  connectionManager.attemptReconnect(() => { // –ú–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑
```
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å —Ñ–ª–∞–≥ `isReconnecting` –≤ ConnectionManager.

### 3. **–ù–µ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è AudioContext –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö (webrtc.js)**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ï—Å–ª–∏ —Å–æ–∑–¥–∞–Ω–∏–µ peer –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –æ—à–∏–±–∫–æ–π, AudioContext –º–æ–∂–µ—Ç –æ—Å—Ç–∞—Ç—å—Å—è –æ—Ç–∫—Ä—ã—Ç—ã–º.
**–ú–µ—Å—Ç–æ:** `webrtc.js:145-157`
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å try-catch –∏ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—É—é –æ—á–∏—Å—Ç–∫—É –≤ finally.

### 4. **–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è —É—Ç–µ—á–∫–∞ —Å–ª—É—à–∞—Ç–µ–ª–µ–π Firebase (app.js)**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –≤—ã–∑–æ–≤–µ `setupListeners()` —Å—Ç–∞—Ä—ã–µ —Å–ª—É—à–∞—Ç–µ–ª–∏ –Ω–µ –æ—Ç–∫–ª—é—á–∞—é—Ç—Å—è.
**–ú–µ—Å—Ç–æ:** `app.js:489-546`
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –û—Ç–∫–ª—é—á–∞—Ç—å —Å—Ç–∞—Ä—ã–µ —Å–ª—É—à–∞—Ç–µ–ª–∏ –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –Ω–æ–≤—ã—Ö.

### 5. **–ù–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ roomId (app.js)**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ú–æ–∂–Ω–æ –≤–≤–µ—Å—Ç–∏ –ø—É—Å—Ç–æ–π –∏–ª–∏ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π roomId.
**–ú–µ—Å—Ç–æ:** `app.js:339`
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é —Ñ–æ—Ä–º–∞—Ç–∞ roomId.

---

## ‚ö†Ô∏è –°–†–ï–î–ù–ò–ï –ë–ê–ì–ò

### 6. **–î–≤–æ–π–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –ø—Ä–∏ –±—ã—Å—Ç—Ä–æ–º –Ω–∞–∂–∞—Ç–∏–∏ Enter**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ú–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–≤–∞–∂–¥—ã, –µ—Å–ª–∏ –±—ã—Å—Ç—Ä–æ –Ω–∞–∂–∞—Ç—å Enter –¥–≤–∞–∂–¥—ã.
**–ú–µ—Å—Ç–æ:** `app.js:184-189`
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å debounce –∏–ª–∏ —Ñ–ª–∞–≥ `isSending`.

### 7. **–ù–µ –æ—á–∏—â–∞–µ—Ç—Å—è fileInput –ø–æ—Å–ª–µ –æ—à–∏–±–∫–∏ (chat.js)**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –æ—à–∏–±–∫–µ —á—Ç–µ–Ω–∏—è —Ñ–∞–π–ª–∞ `fileInput.value` –æ—á–∏—â–∞–µ—Ç—Å—è, –Ω–æ `attachedFile` –º–æ–∂–µ—Ç –æ—Å—Ç–∞—Ç—å—Å—è.
**–ú–µ—Å—Ç–æ:** `chat.js:213-217`
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—á–∏—Å—Ç–∫—É –≤ finally –±–ª–æ–∫–µ.

### 8. **–ü—Ä–æ–≤–µ—Ä–∫–∞ muted —á–µ—Ä–µ–∑ DOM –≤ speech.js**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ —á–µ—Ä–µ–∑ DOM –∑–∞–ø—Ä–æ—Å—ã –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞ –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Ç–æ—á–Ω–æ–π.
**–ú–µ—Å—Ç–æ:** `speech.js:120-127`
```javascript
const userCard = document.querySelector(`[data-user-id="${userId}"]`); // –î–æ—Ä–æ–≥–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è
```
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –•—Ä–∞–Ω–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ muted –≤ –æ–±—ä–µ–∫—Ç–µ users –∏–ª–∏ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∫–∞–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä.

### 9. **–ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –ø—Ä–∏ –∑–∞–º–µ–Ω–µ —Ç—Ä–µ–∫–∞ (webrtc.js)**
**–ü—Ä–æ–±–ª–µ–º–∞:** `replaceTrack` –º–æ–∂–µ—Ç –≤—ã–±—Ä–æ—Å–∏—Ç—å –æ—à–∏–±–∫—É, –∫–æ—Ç–æ—Ä–∞—è –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è.
**–ú–µ—Å—Ç–æ:** `webrtc.js:208-212`
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –û–±–µ—Ä–Ω—É—Ç—å –≤ try-catch.

### 10. **–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è —É—Ç–µ—á–∫–∞ –≤ updateMicrophone (webrtc.js)**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ —Å—Ç–∞—Ä—ã–π —Å—Ç—Ä–∏–º –º–æ–∂–µ—Ç –Ω–µ –æ—Å–≤–æ–±–æ–∂–¥–∞—Ç—å—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é.
**–ú–µ—Å—Ç–æ:** `webrtc.js:201-216`
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ —Ç—Ä–µ–∫–∏ —Å—Ç–∞—Ä–æ–≥–æ —Å—Ç—Ä–∏–º–∞ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã.

---

## üü° –ú–ï–õ–ö–ò–ï –ë–ê–ì–ò

### 11. **–ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ null –¥–ª—è audioAnalysers (speech.js)**
**–ú–µ—Å—Ç–æ:** `speech.js:116`
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É `if (!this.audioAnalysers[userId]) return;`

### 12. **Toast –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ —É–¥–∞–ª—è–µ—Ç—Å—è (ui.js)**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è toast —Å–æ–∑–¥–∞–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –∏ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —É–¥–∞–ª—è–µ—Ç—Å—è.
**–ú–µ—Å—Ç–æ:** `ui.js:62-72`
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –£–¥–∞–ª—è—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –µ—Å–ª–∏ –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö toast.

### 13. **–ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ —Ñ–∞–π–ª–∞ (app.js)**
**–ú–µ—Å—Ç–æ:** `app.js:236-242`
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ FileReader.

### 14. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –≤ createRoom –∏ joinRoom (app.js)**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ú–Ω–æ–≥–æ –ø–æ–≤—Ç–æ—Ä—è—é—â–µ–≥–æ—Å—è –∫–æ–¥–∞.
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –í—ã–Ω–µ—Å—Ç–∏ –æ–±—â—É—é –ª–æ–≥–∏–∫—É –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é.

---

## ‚ö° –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–ò

### 1. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–µ—Ç–µ–∫—Ü–∏–∏ —Ä–µ—á–∏**
**–¢–µ–∫—É—â–µ–µ:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–µ 100ms –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.
**–£–ª—É—á—à–µ–Ω–∏–µ:** 
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `requestIdleCallback` –¥–ª—è –Ω–µ–∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫
- –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ 50ms
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–Ω–µ muted)

### 2. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è DOM –æ–ø–µ—Ä–∞—Ü–∏–π**
**–ü—Ä–æ–±–ª–µ–º—ã:**
- `document.querySelector` –≤ —Ü–∏–∫–ª–µ (`speech.js:120`)
- –ß–∞—Å—Ç—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è `innerHTML` (`users.js:47`)
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ `appendChild` –≤ `chat.js`

**–£–ª—É—á—à–µ–Ω–∏—è:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `DocumentFragment` –¥–ª—è batch –æ–ø–µ—Ä–∞—Ü–∏–π
- –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å DOM —ç–ª–µ–º–µ–Ω—Ç—ã
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `requestAnimationFrame` –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π UI

### 3. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è Firebase —Å–ª—É—à–∞—Ç–µ–ª–µ–π**
**–ü—Ä–æ–±–ª–µ–º–∞:** –°–ª—É—à–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç–æ.
**–£–ª—É—á—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å debounce –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π UI.

### 4. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞–º—è—Ç–∏**
**–ü—Ä–æ–±–ª–µ–º—ã:**
- –°–æ–æ–±—â–µ–Ω–∏—è —á–∞—Ç–∞ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ DOM (–¥–æ 200 —ç–ª–µ–º–µ–Ω—Ç–æ–≤)
- Base64 —Ñ–∞–π–ª—ã –≤ –ø–∞–º—è—Ç–∏
- –ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π —Ä–æ—Å—Ç `userCardHandlers` Map

**–£–ª—É—á—à–µ–Ω–∏—è:**
- –í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è —Å–ø–∏—Å–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
- –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ –ø–∞–º—è—Ç–∏
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ Map –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

### 5. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è WebRTC**
**–ü—Ä–æ–±–ª–µ–º—ã:**
- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ AudioContext –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ù–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ SimplePeer

**–£–ª—É—á—à–µ–Ω–∏—è:**
- –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å AudioContext –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è trickle ICE

---

## üîí –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨

### 1. **–í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ä–∞–∑–º–µ—Ä, –Ω–æ –Ω–µ —Ç–∏–ø —Ñ–∞–π–ª–∞.
**–£–ª—É—á—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å whitelist —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö —Ç–∏–ø–æ–≤ —Ñ–∞–π–ª–æ–≤.

### 2. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–ª–∏–Ω—ã –Ω–∏–∫–Ω–µ–π–º–∞**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ –¥–ª–∏–Ω—É –Ω–∏–∫–Ω–µ–π–º–∞.
**–£–ª—É—á—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å `MAX_NICKNAME_LENGTH` –≤ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã.

### 3. **Sanitization URL –≤ —Ñ–∞–π–ª–∞—Ö**
**–ü—Ä–æ–±–ª–µ–º–∞:** `file.data` (base64) –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—á–µ–Ω—å –±–æ–ª—å—à–∏–º –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è DoS.
**–£–ª—É—á—à–µ–Ω–∏–µ:** 
- –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å —Ä–∞–∑–º–µ—Ä base64 –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å base64

### 4. **Firebase Security Rules**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Ç —É–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –ø—Ä–∞–≤–∏–ª–∞—Ö –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ Firebase.
**–£–ª—É—á—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä –ø—Ä–∞–≤–∏–ª –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é.

### 5. **Rate limiting –¥–ª—è WebRTC —Å–∏–≥–Ω–∞–ª–æ–≤**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ —á–∞—Å—Ç–æ—Ç—É –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–∏–≥–Ω–∞–ª–æ–≤.
**–£–ª—É—á—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å rate limiting –¥–ª—è —Å–∏–≥–Ω–∞–ª–æ–≤.

---

## üé® –£–õ–£–ß–®–ï–ù–ò–Ø UX/UI

### 1. **–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏**
- –ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ñ–∞–π–ª–∞ –ø–æ–∫–∞–∑–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å
- –ü—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∫ –∫–æ–º–Ω–∞—Ç–µ –ø–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏–Ω–Ω–µ—Ä

### 2. **–£–ª—É—á—à–µ–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**
- –†–∞–∑–Ω—ã–µ —Ü–≤–µ—Ç–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- –ó–≤—É–∫–æ–≤—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è –≤–∞–∂–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π
- –ò—Å—Ç–æ—Ä–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### 3. **–ö–ª–∞–≤–∏–∞—Ç—É—Ä–Ω—ã–µ —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è**
- Ctrl+Enter –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è
- Ctrl+M –¥–ª—è mute/unmute
- Escape –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω

### 4. **–ê–≤—Ç–æ—Å–∫—Ä–æ–ª–ª —á–∞—Ç–∞**
- –£–º–Ω—ã–π –∞–≤—Ç–æ—Å–∫—Ä–æ–ª–ª (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–Ω–∏–∑—É)
- –ö–Ω–æ–ø–∫–∞ "–ü—Ä–æ–∫—Ä—É—Ç–∏—Ç—å –≤–Ω–∏–∑" –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ–∫—Ä—É—Ç–∏–ª –≤–≤–µ—Ä—Ö

### 5. **–£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**
- –ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

---

## üì¶ –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –ò –ö–û–î

### 1. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏**
**–ü—Ä–æ–±–ª–µ–º–∞:** `app.js` –≤—Å–µ –µ—â–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –º–Ω–æ–≥–æ –ª–æ–≥–∏–∫–∏.
**–£–ª—É—á—à–µ–Ω–∏–µ:** –í—ã–Ω–µ—Å—Ç–∏ –ª–æ–≥–∏–∫—É –∫–æ–º–Ω–∞—Ç –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å `RoomManager`.

### 2. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ú–Ω–æ–≥–æ `console.error` –±–µ–∑ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏.
**–£–ª—É—á—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞—Ç—å `ErrorHandler` –∫–ª–∞—Å—Å.

### 3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Ç —Ç–µ—Å—Ç–æ–≤.
**–£–ª—É—á—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å unit —Ç–µ—Å—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –º–æ–¥—É–ª–µ–π.

### 4. **–¢–∏–ø–∏–∑–∞—Ü–∏—è**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Ç TypeScript –∏–ª–∏ JSDoc —Ç–∏–ø–æ–≤.
**–£–ª—É—á—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–Ω—ã–µ JSDoc –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Å —Ç–∏–ø–∞–º–∏.

### 5. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω—ã.
**–£–ª—É—á—à–µ–Ω–∏–µ:** –í—ã–Ω–µ—Å—Ç–∏ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª.

---

## üöÄ –ù–û–í–´–ï –§–£–ù–ö–¶–ò–ò

### 1. **–ò—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π**
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –ª–æ–∫–∞–ª—å–Ω–æ
- –ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ –ø—Ä–∏ –≤—Ö–æ–¥–µ –≤ –∫–æ–º–Ω–∞—Ç—É

### 2. **–ü–æ–∏—Å–∫ –≤ —á–∞—Ç–µ**
- –ü–æ–∏—Å–∫ –ø–æ —Ç–µ–∫—Å—Ç—É —Å–æ–æ–±—â–µ–Ω–∏–π
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∞–≤—Ç–æ—Ä—É

### 3. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞**
- –í—ã–±–æ—Ä –∫–∞—á–µ—Å—Ç–≤–∞ –∞—É–¥–∏–æ (–±–∏—Ç—Ä–µ–π—Ç)
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–µ—Ç–µ–∫—Ü–∏–∏ —Ä–µ—á–∏

### 4. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**
- –í—Ä–µ–º—è –≤ –∫–æ–º–Ω–∞—Ç–µ
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π

### 5. **–≠–∫—Å–ø–æ—Ä—Ç —á–∞—Ç–∞**
- –≠–∫—Å–ø–æ—Ä—Ç –≤ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª
- –≠–∫—Å–ø–æ—Ä—Ç —Å —Ñ–∞–π–ª–∞–º–∏

---

## üìä –ú–ï–¢–†–ò–ö–ò –ò –ú–û–ù–ò–¢–û–†–ò–ù–ì

### 1. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**
- –ò–∑–º–µ—Ä–µ–Ω–∏–µ FPS
- –í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–π
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏

### 2. **–û—à–∏–±–∫–∏**
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –û—Ç–ø—Ä–∞–≤–∫–∞ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –æ—à–∏–±–æ–∫ –Ω–∞ —Å–µ—Ä–≤–µ—Ä (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### 3. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞**
- –°–æ–±—ã—Ç–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (join, leave, send message)
- –í—Ä–µ–º—è —Å–µ—Å—Å–∏–∏
- –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

---

## üîß –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ô –î–û–õ–ì

### 1. **–£—Å—Ç–∞—Ä–µ–≤—à–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–ª—è `electron`
- –û–±–Ω–æ–≤–∏—Ç—å `simple-peer` –µ—Å–ª–∏ –µ—Å—Ç—å –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è

### 2. **–ö–æ–¥ —Å—Ç–∏–ª—å**
- –î–æ–±–∞–≤–∏—Ç—å ESLint –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ (Prettier)

### 3. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**
- API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è –º–æ–¥—É–ª–µ–π
- –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
- –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 4. **CI/CD**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º

---

## ‚úÖ –ü–†–ò–û–†–ò–¢–ï–¢–´ –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–∫—Ä–∏—Ç–∏—á–Ω–æ):
1. –£—Ç–µ—á–∫–∞ –ø–∞–º—è—Ç–∏ –≤ WebRTC
2. Race condition –ø—Ä–∏ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏
3. –ù–µ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è AudioContext
4. –í–∞–ª–∏–¥–∞—Ü–∏—è roomId
5. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è DOM –æ–ø–µ—Ä–∞—Ü–∏–π –≤ speech.js

### –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
6. –î–≤–æ–π–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
7. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ replaceTrack
8. Debounce –¥–ª—è Firebase —Å–ª—É—à–∞—Ç–µ–ª–µ–π
9. –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–∏–ø–æ–≤ —Ñ–∞–π–ª–æ–≤
10. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–ª–∏–Ω—ã –Ω–∏–∫–Ω–µ–π–º–∞

### –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
11. –£–ª—É—á—à–µ–Ω–∏—è UX
12. –ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
13. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
14. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

---

## üìù –ó–ê–ú–ï–¢–ö–ò

- –ü—Ä–æ–µ–∫—Ç —Ö–æ—Ä–æ—à–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω —Å –º–æ–¥—É–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –≤ —Ü–µ–ª–æ–º –Ω–∞ —Ö–æ—Ä–æ—à–µ–º —É—Ä–æ–≤–Ω–µ (XSS –∑–∞—â–∏—Ç–∞, contextIsolation)
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å, –Ω–æ —Ç–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–µ–º–ª–µ–º–∞
- –ö–æ–¥ —á–∏—Ç–∞–µ–º—ã–π –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π
- –•–æ—Ä–æ—à–∞—è —Ä–∞–±–æ—Ç–∞ —Å –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞–º–∏ –∏ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏


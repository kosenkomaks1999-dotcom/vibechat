# Структура проекта VibeChat

## Новая модульная архитектура

Проект был рефакторирован из монолитного `app.js` (1640 строк) в модульную структуру для улучшения поддержки и читаемости кода.

## Структура папок

```
src/
├── modules/
│   ├── constants.js      # Все константы и магические числа
│   ├── firebase.js       # Работа с Firebase
│   ├── webrtc.js         # WebRTC соединения (SimplePeer)
│   ├── chat.js           # Логика чата и сообщений
│   ├── ui.js             # UI элементы и взаимодействия
│   ├── users.js          # Управление участниками
│   ├── speech.js         # Детекция речи
│   ├── devices.js        # Управление устройствами (микрофоны, динамики)
│   └── sounds.js         # Звуковые уведомления
├── utils/
│   └── security.js       # Функции безопасности (escapeHtml, валидация)
└── app.js                # Главный файл инициализации
```

## Преимущества новой структуры

1. **Модульность** - каждый модуль отвечает за свою область
2. **Переиспользование** - функции можно использовать в разных местах
3. **Тестируемость** - модули легче тестировать
4. **Читаемость** - код проще понять и поддерживать
5. **Константы** - все магические числа вынесены в один файл
6. **Безопасность** - функции безопасности вынесены в отдельный модуль

## Использование

Все модули используют ES6 модули (import/export). Главный файл `app.js` загружается с `type="module"` в `index.html`.

## Миграция

Старый файл `app.js` сохранен как `app.js.old` для справки. Если нужно вернуться к старой версии, просто переименуйте файлы обратно.

